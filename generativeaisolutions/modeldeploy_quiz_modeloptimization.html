<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- STEP 1: (Optional) Change the browser tab title -->
    <title>Quiz Template</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            touch-action: manipulation; /* Prevents double-tap zoom on mobile */
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #dcfce7 !important; /* Lighter green */
            border-color: #22c55e !important;
            color: #15803d;
        }
        .incorrect {
            background-color: #fee2e2 !important; /* Lighter red */
            border-color: #ef4444 !important;
            color: #b91c1c;
        }
        .correct-answer-text {
            color: #16a34a;
            font-weight: 600;
        }
        /* Animation for modal */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-2 sm:p-4">

    <!-- Title Page Container -->
    <div id="title-container" class="w-full max-w-2xl bg-white p-8 sm:p-12 rounded-2xl shadow-lg text-center">
        <!-- STEP 2: Update the quiz title and subtitle on the title page -->
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">Model - Choose and Deploy</h1>
        <p class="text-lg text-gray-600 mt-4">Model Optimization</p>
        <p id="title-pool-count" class="text-md text-gray-500 mt-6">Total questions in pool: 0</p>
        <button id="begin-quiz-btn" class="mt-8 w-full py-3 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 text-lg">Begin Quiz</button>
        <!-- Added Exit Link -->
        <a href="../index.html" class="mt-4 inline-block text-sm text-gray-500 hover:underline">Exit to Main Page</a>
    </div>

    <!-- Quiz Container -->
    <div id="quiz-container" class="hidden w-full max-w-2xl bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
        <!-- Header -->
        <div class="mb-6">
            <div id="progress-container" class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-out"></div>
            </div>
            <div class="flex justify-between items-center mt-2">
                <div id="progress-text" class="text-sm text-gray-600">Question 0 of 0</div>
                <!-- Added Exit Link to quiz header -->
                <div>
                    <button id="restart-quiz-ingame-btn" class="text-sm font-semibold text-blue-600 hover:underline focus:outline-none">Restart Quiz</button>
                    <a href="../index.html" class="ml-4 text-sm font-semibold text-gray-500 hover:underline focus:outline-none">Exit</a>
                </div>
            </div>
        </div>

        <!-- Question Area -->
        <div id="question-area" class="mb-6 min-h-[6rem] flex items-center justify-center">
            <h2 id="question-text" class="text-lg sm:text-xl font-semibold text-gray-700 text-center"></h2>
        </div>

        <!-- Options Area -->
        <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Options will be dynamically inserted here -->
        </div>

        <!-- Feedback Area -->
        <div id="feedback-area" class="mt-6 text-center min-h-[4rem] flex items-center justify-center p-2">
             <p id="feedback-text" class="font-medium text-base"></p>
        </div>


        <!-- Navigation -->
        <div class="mt-6 flex justify-between items-center">
            <button id="prev-btn" class="py-2 px-4 bg-gray-300 text-gray-700 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button>
            <button id="next-btn" class="py-2 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">Next</button>
        </div>
    </div>

    <!-- Final Score Modal -->
    <div id="score-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
        <div class="bg-white p-8 rounded-2xl shadow-2xl text-center w-full max-w-md modal-fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Quiz Complete!</h2>
            <p class="text-gray-600 mb-2">Your final score is:</p>
            <p id="final-score" class="text-5xl font-extrabold text-blue-600 mb-6">0/0</p>
            <p id="score-message" class="text-lg font-medium text-gray-700 mb-6"></p>
            <div class="flex flex-col sm:flex-row gap-4">
                 <button id="repeat-quiz-btn" class="w-full py-3 px-6 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75">Repeat Quiz</button>
                <button id="new-quiz-btn" class="w-full py-3 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">New Quiz</button>
            </div>
            <!-- Added Exit Link -->
            <a href="../index.html" class="mt-4 inline-block text-sm text-gray-500 hover:underline">Exit to Main Page</a>
        </div>
    </div>


    <script>
        // STEP 3: Replace the content of this array with your new questions.
        // Ensure each question object follows this format:
        // { 
        //   question: "Your question text here?", 
        //   options: ["Option A", "Option B", "Option C", "Option D"], 
        //   answer: "The exact text of the correct option" 
        // },
        const questionPool = [
            // ==> PASTE YOUR NEW QUESTION POOL ARRAY HERE <==
            // EXAMPLE:
    {
        question: "What is the process of designing and optimizing prompts to improve a language model's performance called?",
        options: ["Model Deployment", "Fine-tuning", "Prompt Engineering", "Retrieval Augmented Generation"],
        answer: "Prompt Engineering"
    },
    {
        question: "Which prompt pattern involves instructing the model to take on a specific point of view, like a 'seasoned marketing professional'?",
        options: ["Adding Context", "Specifying a Format", "Acting as a Persona", "Chain-of-Thought"],
        answer: "Acting as a Persona"
    },
    {
        question: "What is the purpose of a 'system prompt' in a chat application?",
        options: ["It is the first question the user asks.", "It sets the model's behavior and provides instructions without exposing them to the end user.", "It is the final response from the model.", "It is a log of the entire conversation."],
        answer: "It sets the model's behavior and provides instructions without exposing them to the end user."
    },
    {
        question: "If you want a model to generate output in a specific format like a JSON object or a table, which prompt pattern should you use?",
        options: ["Asking for better question suggestions", "Specifying the desired format for responses", "Instructing the model to act as a persona", "Asking for an explanation of reasoning"],
        answer: "Specifying the desired format for responses"
    },
    {
        question: "What is the 'chain-of-thought' technique used for?",
        options: ["To make the model respond faster.", "To make the model think step-by-step and explain its reasoning.", "To connect the model to an external data source.", "To fine-tune the model on a new dataset."],
        answer: "To make the model think step-by-step and explain its reasoning."
    },
    {
        question: "What is the primary goal of Retrieval Augmented Generation (RAG)?",
        options: ["To change the model's conversational style.", "To provide grounding context to prompts from a trusted data source.", "To reduce the cost of model deployment.", "To increase the speed of the model's response."],
        answer: "To provide grounding context to prompts from a trusted data source."
    },
    {
        question: "When is it most appropriate to use fine-tuning to optimize a model?",
        options: ["When the model lacks contextual knowledge about recent events.", "When you want to maximize the consistency of a model's behavior, style, and format.", "As the very first step in any optimization effort.", "When you need to connect to a single, small data source."],
        answer: "When you want to maximize the consistency of a model's behavior, style, and format."
    },
    {
        question: "According to the optimization strategy diagram, which technique is best for 'Context optimization' (what the model needs to know)?",
        options: ["Prompt engineering", "Fine-tuning", "Retrieval Augmented Generation (RAG)", "Combined strategies"],
        answer: "Retrieval Augmented Generation (RAG)"
    },
    {
        question: "What is the recommended first step in any model optimization effort?",
        options: ["Fine-tuning", "Retrieval Augmented Generation (RAG)", "Prompt engineering", "Deploying a new model"],
        answer: "Prompt engineering"
    },
    {
        question: "Providing one or more examples of the desired output within a prompt is known as what kind of approach?",
        options: ["Zero-shot", "One-shot or few-shots", "Chain-of-thought", "Persona-based"],
        answer: "One-shot or few-shots"
    },
    {
        question: "When would RAG be a particularly useful approach?",
        options: ["When you want the model to adopt a sarcastic tone.", "When you need the model to answer questions based on events that occurred after its training data was created.", "When you want to reduce the number of tokens in the prompt.", "When you want to change the model's core architecture."],
        answer: "When you need the model to answer questions based on events that occurred after its training data was created."
    },
    {
        question: "What is the primary trade-off when choosing between prompt engineering and more complex strategies like RAG or fine-tuning?",
        options: ["Prompt engineering is more effective but slower.", "RAG and fine-tuning involve additional cost, complexity, and maintainability challenges.", "Prompt engineering only works with small models.", "RAG cannot be combined with prompt engineering."],
        answer: "RAG and fine-tuning involve additional cost, complexity, and maintainability challenges."
    },
    {
        question: "How can you guide a model to suggest better questions and provide more context?",
        options: ["By telling it to be brief.", "By asking it to suggest clarifying questions in your prompt.", "By fine-tuning it on a Q&A dataset.", "By using a smaller model."],
        answer: "By asking it to suggest clarifying questions in your prompt."
    },
    {
        question: "If a model's behavior isn't consistent even after using prompt engineering, what is the next logical optimization strategy to enforce consistency?",
        options: ["Deploying a larger model.", "Using a different API.", "Fine-tuning the model.", "Adding more examples to the prompt."],
        answer: "Fine-tuning the model."
    },
    {
        question: "What does it mean to 'ground your data' in the context of RAG?",
        options: ["Storing your data on-premises.", "First retrieving context from a data source before generating a response.", "Encrypting your data before sending it to the model.", "Deleting old data from your knowledge base."],
        answer: "First retrieving context from a data source before generating a response."
    },
    {
        question: "Which prompt pattern helps ensure a conversation stays on track by specifying what the model should or shouldn't include?",
        options: ["Acting as a Persona", "Adding Context", "Specifying a Format", "Chain-of-Thought"],
        answer: "Adding Context"
    },
    {
        question: "The diagram shows that combining strategies is an option. What would be an example of a combined strategy?",
        options: ["Using only prompt engineering.", "Using only fine-tuning.", "Using RAG with a fine-tuned model and prompt engineering.", "Using two different base models at the same time."],
        answer: "Using RAG with a fine-tuned model and prompt engineering."
    },
    {
        question: "What is the goal of providing a template in a prompt?",
        options: ["To confuse the model.", "To get the model to generate output in a specific, structured format.", "To test the model's creativity.", "To make the prompt longer."],
        answer: "To get the model to generate output in a specific, structured format."
    },
    {
        question: "If you want an employee chatbot to answer questions based on your company's internal expense policy documents, which optimization strategy is most suitable?",
        options: ["Fine-tuning", "Retrieval Augmented Generation (RAG)", "Acting as a Persona", "Chain-of-Thought"],
        answer: "Retrieval Augmented Generation (RAG)"
    },
    {
        question: "Which of the following is NOT a recognized prompt pattern for optimization?",
        options: ["Instruct the model to act as a persona.", "Provide a template for a specific format.", "Ask the model to use as many tokens as possible.", "Add context to improve accuracy."],
        answer: "Ask the model to use as many tokens as possible."
    }
 ];

        // --- DOM Elements ---
        const titleContainer = document.getElementById('title-container');
        const quizContainer = document.getElementById('quiz-container');
        const beginQuizBtn = document.getElementById('begin-quiz-btn');
        const titlePoolCount = document.getElementById('title-pool-count');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackText = document.getElementById('feedback-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const scoreModal = document.getElementById('score-modal');
        const finalScore = document.getElementById('final-score');
        const scoreMessage = document.getElementById('score-message');
        const newQuizBtn = document.getElementById('new-quiz-btn');
        const repeatQuizBtn = document.getElementById('repeat-quiz-btn');
        const restartQuizIngameBtn = document.getElementById('restart-quiz-ingame-btn');

        // --- State Variables ---
        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let questionsAnswered = false;
        const PASSING_SCORE_PERCENTAGE = 90;

        // --- Functions (No changes needed below this line) ---
        
        function startNewQuiz() {
            currentQuizQuestions = [...questionPool];
            resetQuizState();
            loadQuestion();
        }
        
        function repeatQuiz() {
            resetQuizState();
            loadQuestion();
        }

        function resetQuizState() {
            currentQuestionIndex = 0;
            userAnswers = new Array(currentQuizQuestions.length).fill(null);
            questionsAnswered = false;
            
            scoreModal.classList.add('hidden');
            const modalContent = scoreModal.querySelector('div');
            modalContent.classList.remove('modal-fade-in');
        }

        function loadQuestion() {
            feedbackText.textContent = '';
            feedbackText.className = 'font-medium text-base';
            optionsContainer.innerHTML = '';
            questionsAnswered = false;

            if (!currentQuizQuestions || currentQuizQuestions.length === 0) {
                questionText.textContent = "Loading quiz...";
                return;
            }

            const currentQuestion = currentQuizQuestions[currentQuestionIndex];
            questionText.textContent = currentQuestion.question;

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quiz-option', 'w-full', 'text-left', 'p-4', 'bg-gray-50', 'border', 'border-gray-300', 'rounded-lg', 'hover:bg-blue-100', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-300');
                button.onclick = () => selectOption(button, option);
                optionsContainer.appendChild(button);
            });

            updateProgress();
            updateNavigation();
            showPreviousAnswer();
        }

        function selectOption(selectedButton, selectedOption) {
            if (questionsAnswered) return; 
            questionsAnswered = true;
            userAnswers[currentQuestionIndex] = selectedOption;

            const currentQuestion = currentQuizQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.answer;
            
            if (isCorrect) {
                selectedButton.classList.add('correct');
                feedbackText.textContent = "Correct!";
                feedbackText.classList.add('text-green-600');
            } else {
                selectedButton.classList.add('incorrect');
                feedbackText.innerHTML = `Incorrect. The correct answer is: <strong class="correct-answer-text">${currentQuestion.answer}</strong>`;
                feedbackText.classList.add('text-red-600');
            }

            Array.from(optionsContainer.children).forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === currentQuestion.answer) {
                    btn.classList.add('correct');
                }
            });
            
            setTimeout(() => {
                if (currentQuestionIndex < currentQuizQuestions.length - 1) {
                    nextQuestion();
                } else {
                    showScore();
                }
            }, 2500);
        }
        
        function showPreviousAnswer() {
            const previousAnswer = userAnswers[currentQuestionIndex];
            if (previousAnswer !== null) {
                questionsAnswered = true;
                const currentQuestion = currentQuizQuestions[currentQuestionIndex];
                const isCorrect = previousAnswer === currentQuestion.answer;

                if (isCorrect) {
                    feedbackText.textContent = "Correct!";
                    feedbackText.classList.add('text-green-600');
                } else {
                    feedbackText.innerHTML = `Incorrect. The correct answer is: <strong class="correct-answer-text">${currentQuestion.answer}</strong>`;
                    feedbackText.classList.add('text-red-600');
                }

                Array.from(optionsContainer.children).forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === currentQuestion.answer) {
                        btn.classList.add('correct');
                    }
                    if (btn.textContent === previousAnswer && !isCorrect) {
                        btn.classList.add('incorrect');
                    }
                });
            }
        }

        function updateProgress() {
            const progressPercentage = ((currentQuestionIndex + 1) / currentQuizQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `Question ${currentQuestionIndex + 1} of ${currentQuizQuestions.length}`;
        }

        function updateNavigation() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.textContent = (currentQuestionIndex === currentQuizQuestions.length - 1) ? 'Finish' : 'Next';
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < currentQuizQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showScore();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function showScore() {
            quizContainer.classList.add('hidden');
            scoreModal.classList.remove('hidden');
            
            const modalContent = scoreModal.querySelector('div');
            modalContent.classList.add('modal-fade-in');

            let correctCount = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === currentQuizQuestions[index].answer) {
                    correctCount++;
                }
            });

            const scorePercentage = (correctCount / currentQuizQuestions.length) * 100;
            finalScore.textContent = `${correctCount}/${currentQuizQuestions.length} (${scorePercentage.toFixed(0)}%)`;

            if (scorePercentage >= PASSING_SCORE_PERCENTAGE) {
                scoreMessage.textContent = "Congratulations, you passed! You have a strong grasp of this material.";
                scoreMessage.classList.add('text-green-600');
                scoreMessage.classList.remove('text-red-600');
            } else {
                scoreMessage.textContent = "You did not pass. A score of 90% is required. Please review the material and try again.";
                scoreMessage.classList.add('text-red-600');
                scoreMessage.classList.remove('text-green-600');
            }
        }

        // --- Event Listeners ---
        nextBtn.addEventListener('click', nextQuestion);
        prevBtn.addEventListener('click', prevQuestion);
        
        newQuizBtn.addEventListener('click', () => {
            quizContainer.classList.remove('hidden');
            startNewQuiz();
        });
        
        repeatQuizBtn.addEventListener('click', () => {
            quizContainer.classList.remove('hidden');
            repeatQuiz();
        });

        restartQuizIngameBtn.addEventListener('click', repeatQuiz);

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            titleContainer.classList.remove('hidden');
            quizContainer.classList.add('hidden');
            scoreModal.classList.add('hidden');
            
            titlePoolCount.textContent = `Total questions in pool: ${questionPool.length}`;
            
            beginQuizBtn.addEventListener('click', () => {
                titleContainer.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                startNewQuiz();
            });
        });
    </script>
</body>
</html>
