<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- STEP 1: (Optional) Change the browser tab title -->
    <title>Quiz Template</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            touch-action: manipulation; /* Prevents double-tap zoom on mobile */
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #dcfce7 !important; /* Lighter green */
            border-color: #22c55e !important;
            color: #15803d;
        }
        .incorrect {
            background-color: #fee2e2 !important; /* Lighter red */
            border-color: #ef4444 !important;
            color: #b91c1c;
        }
        .correct-answer-text {
            color: #16a34a;
            font-weight: 600;
        }
        /* Animation for modal */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-2 sm:p-4">

    <!-- Title Page Container -->
    <div id="title-container" class="w-full max-w-2xl bg-white p-8 sm:p-12 rounded-2xl shadow-lg text-center">
        <!-- STEP 2: Update the quiz title and subtitle on the title page -->
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">Plan and Prepare</h1>
        <p class="text-lg text-gray-600 mt-4">Responsible AI</p>
        <p id="title-pool-count" class="text-md text-gray-500 mt-6">Total questions in pool: 0</p>
        <button id="begin-quiz-btn" class="mt-8 w-full py-3 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 text-lg">Begin Quiz</button>
        <!-- Added Exit Link -->
        <a href="../index.html" class="mt-4 inline-block text-sm text-gray-500 hover:underline">Exit to Main Page</a>
    </div>

    <!-- Quiz Container -->
    <div id="quiz-container" class="hidden w-full max-w-2xl bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
        <!-- Header -->
        <div class="mb-6">
            <div id="progress-container" class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-out"></div>
            </div>
            <div class="flex justify-between items-center mt-2">
                <div id="progress-text" class="text-sm text-gray-600">Question 0 of 0</div>
                <!-- Added Exit Link to quiz header -->
                <div>
                    <button id="restart-quiz-ingame-btn" class="text-sm font-semibold text-blue-600 hover:underline focus:outline-none">Restart Quiz</button>
                    <a href="../index.html" class="ml-4 text-sm font-semibold text-gray-500 hover:underline focus:outline-none">Exit</a>
                </div>
            </div>
        </div>

        <!-- Question Area -->
        <div id="question-area" class="mb-6 min-h-[6rem] flex items-center justify-center">
            <h2 id="question-text" class="text-lg sm:text-xl font-semibold text-gray-700 text-center"></h2>
        </div>

        <!-- Options Area -->
        <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Options will be dynamically inserted here -->
        </div>

        <!-- Feedback Area -->
        <div id="feedback-area" class="mt-6 text-center min-h-[4rem] flex items-center justify-center p-2">
             <p id="feedback-text" class="font-medium text-base"></p>
        </div>


        <!-- Navigation -->
        <div class="mt-6 flex justify-between items-center">
            <button id="prev-btn" class="py-2 px-4 bg-gray-300 text-gray-700 font-semibold rounded-lg shadow-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button>
            <button id="next-btn" class="py-2 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">Next</button>
        </div>
    </div>

    <!-- Final Score Modal -->
    <div id="score-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
        <div class="bg-white p-8 rounded-2xl shadow-2xl text-center w-full max-w-md modal-fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Quiz Complete!</h2>
            <p class="text-gray-600 mb-2">Your final score is:</p>
            <p id="final-score" class="text-5xl font-extrabold text-blue-600 mb-6">0/0</p>
            <p id="score-message" class="text-lg font-medium text-gray-700 mb-6"></p>
            <div class="flex flex-col sm:flex-row gap-4">
                 <button id="repeat-quiz-btn" class="w-full py-3 px-6 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75">Repeat Quiz</button>
                <button id="new-quiz-btn" class="w-full py-3 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">New Quiz</button>
            </div>
            <!-- Added Exit Link -->
            <a href="../index.html" class="mt-4 inline-block text-sm text-gray-500 hover:underline">Exit to Main Page</a>
        </div>
    </div>


    <script>
        // STEP 3: Replace the content of this array with your new questions.
        // Ensure each question object follows this format:
        // { 
        //   question: "Your question text here?", 
        //   options: ["Option A", "Option B", "Option C", "Option D"], 
        //   answer: "The exact text of the correct option" 
        // },
        const questionPool = [
            // ==> PASTE YOUR NEW QUESTION POOL ARRAY HERE <==
            // EXAMPLE:
    {
        question: "Which of the following is NOT one of the six core principles of Responsible AI adopted by Microsoft?",
        options: ["Fairness", "Reliability and Safety", "Profitability", "Accountability"],
        answer: "Profitability"
    },
    {
        question: "According to the 'Fairness' principle, what is a key action developers should take when creating a loan approval model?",
        options: ["Use the newest AI model available.", "Carefully review training data to ensure it's representative and free of bias.", "Ensure the model provides a confidence score.", "Only use data from previously approved loans."],
        answer: "Carefully review training data to ensure it's representative and free of bias."
    },
    {
        question: "The 'Reliability and Safety' principle is especially critical for which type of AI system?",
        options: ["An AI that recommends music.", "An AI-based system for an autonomous vehicle.", "An AI that generates social media posts.", "An AI that summarizes news articles."],
        answer: "An AI-based system for an autonomous vehicle."
    },
    {
        question: "What must software engineers take into account due to the 'probabilistic nature of machine learning models'?",
        options: ["That models will always be 100% accurate.", "That models do not require extensive testing.", "The need to apply appropriate thresholds when evaluating confidence scores.", "That models can only be used for simple tasks."],
        answer: "The need to apply appropriate thresholds when evaluating confidence scores."
    },
    {
        question: "Which principle states that AI systems should be secure and respect that models may rely on data containing personal details?",
        options: ["Transparency", "Inclusiveness", "Privacy and Security", "Accountability"],
        answer: "Privacy and Security"
    },
    {
        question: "How can developers best optimize for the 'Inclusiveness' principle?",
        options: ["By making the user interface visually simple.", "By ensuring the design and testing process includes input from a diverse group of people.", "By using only the most popular programming languages.", "By providing the service for free."],
        answer: "By ensuring the design and testing process includes input from a diverse group of people."
    },
    {
        question: "The 'Transparency' principle requires that users should be made fully aware of what?",
        options: ["The exact algorithms used in the model.", "The cost to run the AI system.", "The system's purpose, how it works, and its expected limitations.", "The names of the developers who created the system."],
        answer: "The system's purpose, how it works, and its expected limitations."
    },
    {
        question: "What is the core idea behind the 'Accountability' principle in Responsible AI?",
        options: ["The AI system is solely accountable for its own actions.", "The end-user is accountable for how they interpret the results.", "The developers who trained and validated the models are ultimately responsible for the system.", "Accountability is determined by government regulators after a system is deployed."],
        answer: "The developers who trained and validated the models are ultimately responsible for the system."
    },
    {
        question: "Sharing information with a user about the confidence score of a prediction is a direct application of which principle?",
        options: ["Fairness", "Inclusiveness", "Reliability and Safety", "Transparency"],
        answer: "Transparency"
    },
    {
        question: "What is the first step software engineers should take to mitigate risks and ensure responsible AI?",
        options: ["Start coding the application immediately.", "Consider fairness from the beginning of the development process.", "Choose the cheapest available model.", "Focus only on the accuracy of the model."],
        answer: "Consider fairness from the beginning of the development process."
    }
 ];

        // --- DOM Elements ---
        const titleContainer = document.getElementById('title-container');
        const quizContainer = document.getElementById('quiz-container');
        const beginQuizBtn = document.getElementById('begin-quiz-btn');
        const titlePoolCount = document.getElementById('title-pool-count');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackText = document.getElementById('feedback-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const scoreModal = document.getElementById('score-modal');
        const finalScore = document.getElementById('final-score');
        const scoreMessage = document.getElementById('score-message');
        const newQuizBtn = document.getElementById('new-quiz-btn');
        const repeatQuizBtn = document.getElementById('repeat-quiz-btn');
        const restartQuizIngameBtn = document.getElementById('restart-quiz-ingame-btn');

        // --- State Variables ---
        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let questionsAnswered = false;
        const PASSING_SCORE_PERCENTAGE = 90;

        // --- Functions (No changes needed below this line) ---
        
        function startNewQuiz() {
            currentQuizQuestions = [...questionPool];
            resetQuizState();
            loadQuestion();
        }
        
        function repeatQuiz() {
            resetQuizState();
            loadQuestion();
        }

        function resetQuizState() {
            currentQuestionIndex = 0;
            userAnswers = new Array(currentQuizQuestions.length).fill(null);
            questionsAnswered = false;
            
            scoreModal.classList.add('hidden');
            const modalContent = scoreModal.querySelector('div');
            modalContent.classList.remove('modal-fade-in');
        }

        function loadQuestion() {
            feedbackText.textContent = '';
            feedbackText.className = 'font-medium text-base';
            optionsContainer.innerHTML = '';
            questionsAnswered = false;

            if (!currentQuizQuestions || currentQuizQuestions.length === 0) {
                questionText.textContent = "Loading quiz...";
                return;
            }

            const currentQuestion = currentQuizQuestions[currentQuestionIndex];
            questionText.textContent = currentQuestion.question;

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quiz-option', 'w-full', 'text-left', 'p-4', 'bg-gray-50', 'border', 'border-gray-300', 'rounded-lg', 'hover:bg-blue-100', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-300');
                button.onclick = () => selectOption(button, option);
                optionsContainer.appendChild(button);
            });

            updateProgress();
            updateNavigation();
            showPreviousAnswer();
        }

        function selectOption(selectedButton, selectedOption) {
            if (questionsAnswered) return; 
            questionsAnswered = true;
            userAnswers[currentQuestionIndex] = selectedOption;

            const currentQuestion = currentQuizQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.answer;
            
            if (isCorrect) {
                selectedButton.classList.add('correct');
                feedbackText.textContent = "Correct!";
                feedbackText.classList.add('text-green-600');
            } else {
                selectedButton.classList.add('incorrect');
                feedbackText.innerHTML = `Incorrect. The correct answer is: <strong class="correct-answer-text">${currentQuestion.answer}</strong>`;
                feedbackText.classList.add('text-red-600');
            }

            Array.from(optionsContainer.children).forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === currentQuestion.answer) {
                    btn.classList.add('correct');
                }
            });
            
            setTimeout(() => {
                if (currentQuestionIndex < currentQuizQuestions.length - 1) {
                    nextQuestion();
                } else {
                    showScore();
                }
            }, 2500);
        }
        
        function showPreviousAnswer() {
            const previousAnswer = userAnswers[currentQuestionIndex];
            if (previousAnswer !== null) {
                questionsAnswered = true;
                const currentQuestion = currentQuizQuestions[currentQuestionIndex];
                const isCorrect = previousAnswer === currentQuestion.answer;

                if (isCorrect) {
                    feedbackText.textContent = "Correct!";
                    feedbackText.classList.add('text-green-600');
                } else {
                    feedbackText.innerHTML = `Incorrect. The correct answer is: <strong class="correct-answer-text">${currentQuestion.answer}</strong>`;
                    feedbackText.classList.add('text-red-600');
                }

                Array.from(optionsContainer.children).forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === currentQuestion.answer) {
                        btn.classList.add('correct');
                    }
                    if (btn.textContent === previousAnswer && !isCorrect) {
                        btn.classList.add('incorrect');
                    }
                });
            }
        }

        function updateProgress() {
            const progressPercentage = ((currentQuestionIndex + 1) / currentQuizQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `Question ${currentQuestionIndex + 1} of ${currentQuizQuestions.length}`;
        }

        function updateNavigation() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.textContent = (currentQuestionIndex === currentQuizQuestions.length - 1) ? 'Finish' : 'Next';
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < currentQuizQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showScore();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function showScore() {
            quizContainer.classList.add('hidden');
            scoreModal.classList.remove('hidden');
            
            const modalContent = scoreModal.querySelector('div');
            modalContent.classList.add('modal-fade-in');

            let correctCount = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === currentQuizQuestions[index].answer) {
                    correctCount++;
                }
            });

            const scorePercentage = (correctCount / currentQuizQuestions.length) * 100;
            finalScore.textContent = `${correctCount}/${currentQuizQuestions.length} (${scorePercentage.toFixed(0)}%)`;

            if (scorePercentage >= PASSING_SCORE_PERCENTAGE) {
                scoreMessage.textContent = "Congratulations, you passed! You have a strong grasp of this material.";
                scoreMessage.classList.add('text-green-600');
                scoreMessage.classList.remove('text-red-600');
            } else {
                scoreMessage.textContent = "You did not pass. A score of 90% is required. Please review the material and try again.";
                scoreMessage.classList.add('text-red-600');
                scoreMessage.classList.remove('text-green-600');
            }
        }

        // --- Event Listeners ---
        nextBtn.addEventListener('click', nextQuestion);
        prevBtn.addEventListener('click', prevQuestion);
        
        newQuizBtn.addEventListener('click', () => {
            quizContainer.classList.remove('hidden');
            startNewQuiz();
        });
        
        repeatQuizBtn.addEventListener('click', () => {
            quizContainer.classList.remove('hidden');
            repeatQuiz();
        });

        restartQuizIngameBtn.addEventListener('click', repeatQuiz);

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            titleContainer.classList.remove('hidden');
            quizContainer.classList.add('hidden');
            scoreModal.classList.add('hidden');
            
            titlePoolCount.textContent = `Total questions in pool: ${questionPool.length}`;
            
            beginQuizBtn.addEventListener('click', () => {
                titleContainer.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                startNewQuiz();
            });
        });
    </script>
</body>
</html>
